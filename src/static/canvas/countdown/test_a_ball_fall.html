<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>test a ball fall</title>
	</head>

	<body>
		<canvas id="canvas" width="1000" height="400" style="border: 1px solid red;"> 不支持canvas，这里的动画就看不到了哟！</canvas>

		<script type="text/javascript">
			var ball = {
				x: 100,
				y: 100,
				r: 20,
				g: 2,
				vx: 4,
				vy: -5,
				color: "Red"
			}
			window.onload = function() {
				var canvas = document.getElementById("canvas");
				var context = canvas.getContext("2d");

				//context draw
				function render(ctx) {
					ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
					ctx.fillStyle = ball.color;
					ctx.beginPath();
					ctx.arc(ball.x, ball.y, ball.r, 0, 2 * Math.PI);
					ctx.closePath();
					ctx.fill();
				}

				function update(ctx) {
					ball.x += ball.vx;
					ball.y += ball.vy;
					ball.vy += ball.g;
					if(ball.y >= ctx.canvas.height - ball.r) {
						ball.vy = -ball.vy * .8;
						ball.y = ctx.canvs.height - ball.r;
					}
				}

				var timer1 = setInterval(function() {
					render(context);
					update(context);
				}, 50);
				
				setTimeout(function(){
					clearTimeout(timer1);
				},30000);
			}
		</script>
	</body>

</html>